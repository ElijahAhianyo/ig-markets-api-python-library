# Sample Stream Ig

[_Documentation generated by Documatic_](https://www.documatic.com)

<!---Documatic-section-Codebase Structure-start--->
## Codebase Structure

<!---Documatic-block-system_architecture-start--->
```mermaid
None
```
<!---Documatic-block-system_architecture-end--->

# #
<!---Documatic-section-Codebase Structure-end--->

<!---Documatic-section-sample.stream_ig.on_prices_update-start--->
## sample.stream_ig.on_prices_update

<!---Documatic-section-on_prices_update-start--->
<!---Documatic-block-sample.stream_ig.on_prices_update-start--->
<details>
	<summary><code>sample.stream_ig.on_prices_update</code> code snippet</summary>

```python
def on_prices_update(item_update):
    print('{stock_name:<19}: Time {UPDATE_TIME:<8} - Bid {BID:>5} - Ask {OFFER:>5}'.format(stock_name=item_update['name'], **item_update['values']))
```
</details>
<!---Documatic-block-sample.stream_ig.on_prices_update-end--->
<!---Documatic-section-on_prices_update-end--->

# #
<!---Documatic-section-sample.stream_ig.on_prices_update-end--->

<!---Documatic-section-sample.stream_ig.on_account_update-start--->
## sample.stream_ig.on_account_update

<!---Documatic-section-on_account_update-start--->
<!---Documatic-block-sample.stream_ig.on_account_update-start--->
<details>
	<summary><code>sample.stream_ig.on_account_update</code> code snippet</summary>

```python
def on_account_update(balance_update):
    print('balance: %s ' % balance_update)
```
</details>
<!---Documatic-block-sample.stream_ig.on_account_update-end--->
<!---Documatic-section-on_account_update-end--->

# #
<!---Documatic-section-sample.stream_ig.on_account_update-end--->

<!---Documatic-section-sample.stream_ig.main-start--->
## sample.stream_ig.main

<!---Documatic-section-main-start--->
<!---Documatic-block-sample.stream_ig.main-start--->
<details>
	<summary><code>sample.stream_ig.main</code> code snippet</summary>

```python
def main():
    logging.basicConfig(level=logging.INFO)
    ig_service = IGService(config.username, config.password, config.api_key, config.acc_type, acc_number=config.acc_number)
    ig_stream_service = IGStreamService(ig_service)
    ig_stream_service.create_session()
    subscription_prices = Subscription(mode='MERGE', items=['L1:CS.D.GBPUSD.TODAY.IP', 'L1:IX.D.FTSE.DAILY.IP'], fields=['UPDATE_TIME', 'BID', 'OFFER', 'CHANGE', 'MARKET_STATE'])
    subscription_prices.addlistener(on_prices_update)
    sub_key_prices = ig_stream_service.ls_client.subscribe(subscription_prices)
    subscription_account = Subscription(mode='MERGE', items=['ACCOUNT:' + config.acc_number], fields=['AVAILABLE_CASH'])
    subscription_account.addlistener(on_account_update)
    sub_key_account = ig_stream_service.ls_client.subscribe(subscription_account)
    input('{0:-^80}\n'.format('HIT CR TO UNSUBSCRIBE AND DISCONNECT FROM     LIGHTSTREAMER'))
    ig_stream_service.disconnect()
```
</details>
<!---Documatic-block-sample.stream_ig.main-end--->
<!---Documatic-section-main-end--->

# #
<!---Documatic-section-sample.stream_ig.main-end--->

[_Documentation generated by Documatic_](https://www.documatic.com)